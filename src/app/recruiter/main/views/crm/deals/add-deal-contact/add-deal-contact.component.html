<!-- <p>add-deal-contact works!</p> -->

<!-- ContactName: ['', [Validators.required]],
EmailAddress: ['', [Validators.required], Validators.email],
PhoneNumber: ['', [Validators.required]], -->
<div class="card border-rounded-lg">
    <div class="card-body">

        <div class="d-flex align-items-start justify-content-between">
            <div></div>
            <h5 class="form-title text-center">Add Contact</h5>
            <div class="text-right">
                <!--  *ngIf="isEditCompanyContact" -->
                <button class="btn btn-sm p-0" (click)="onCloseAddDealContactForm(); closeDialog()">
                    <i class="fas fa-times text-danger"></i>
                </button>
            </div>
        </div>


        <form [formGroup]="AddDealContactForm" (ngSubmit)="onSubmit()">
            <div class="deal-listing">
                <ul class="listing list-style-none pl-0 mb-4">

                    <li>
                        <label class="list-title required-field-label">First name</label>
                        <div class="list-value">
                            <div class="list-value">
                                <input type="text" class="form-control" id="FirstName" formControlName="FirstName"
                                    [ngClass]="{'is-invalid': AddDealContactForm.get('FirstName')?.touched && AddDealContactForm.get('FirstName')?.invalid}"
                                    required>
                                <small class="form-text text-danger invalid-feedback">First
                                    name is
                                    required.</small>
                            </div>
                        </div>
                    </li>
                    <li>
                        <label class="list-title required-field-label">Last name</label>
                        <div class="list-value">
                            <div class="list-value">
                                <input type="text" class="form-control" id="LastName" formControlName="LastName"
                                    required
                                    [ngClass]="{'is-invalid': AddDealContactForm.get('LastName')?.touched && AddDealContactForm.get('LastName')?.invalid}"
                                    required>
                                <small class="form-text text-danger invalid-feedback">Last
                                    name is
                                    required.</small>
                            </div>
                        </div>
                    </li>

                    <li>
                        <label class="list-title required-field-label">Email Address</label>
                        <div class="list-value email">
                            <div class="list-value">
                                <input type="email" class="form-control" id="EmailAddress"
                                    formControlName="EmailAddress"  [ngClass]="{
                                        'is-invalid':
                                          AddDealContactForm.get('EmailAddress')?.touched &&
                                          AddDealContactForm.get('EmailAddress')?.invalid
                                      }" required />
                                    <span class="invalid-feedback">
                                        <small class="form-text text-danger"
                                            *ngIf="AddDealContactForm.get('EmailAddress')?.hasError('required')">Email is
                                            required.
                                        </small>
                                        <small class="form-text text-danger"
                                            *ngIf="AddDealContactForm.get('EmailAddress')?.hasError('email')">You entered an
                                            invalid
                                            Email.
                                        </small>
                                    </span>
                            </div>
                        </div>
                    </li>

                    <li>
                        <label class="list-title required-field-label">Phone Number</label>
                        <div class="list-value phone">
                            <div class="list-value">
                                <!-- <input type="text" class="form-control" id="PhoneNumber" formControlName="PhoneNumber"
                                    required> -->

                                <ngx-intl-tel-input [enableAutoCountrySelect]="true" [enablePlaceholder]="true"
                                    [preferredCountries]="['nl']" [selectFirstCountry]="true"
                                    [searchCountryFlag]="true" [phoneValidation]="false" formControlName="PhoneNumber"
                                    required>
                                </ngx-intl-tel-input>
                                <small id="phoneNumberErrorMsg" class="form-text text-danger"
                                    [ngClass]="{'d-none': !isphoneNumberError}">Phone number is
                                    required.</small>
                            </div>
                        </div>
                    </li>

                </ul>
            </div>


            <!-- {{AddDealContactForm.valid | json}} -->
            <button class="btn success-btn" [disabled]="AddDealContactForm.invalid || isSending">
                <ng-container *ngIf="!isSending; else isLoading">
                    Add contact
                </ng-container>
            </button>
        </form>
    </div>
</div>

<ng-template #isLoading>
    Loading...
</ng-template>
